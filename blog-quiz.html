<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Quiz · Samzy Community</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Inter',sans-serif; }
        body { background:#f8fafc; color:#1e293b; }
        a { text-decoration:none; color:inherit; }
        .blog-header {
            background:white; position:sticky; top:0; z-index:50;
            box-shadow:0 2px 10px rgba(0,0,0,0.03);
            border-bottom:1px solid rgba(0,102,255,0.1);
        }
        .header-container {
            max-width:1300px; margin:0 auto; padding:1rem 2rem;
            display:flex; align-items:center; justify-content:space-between;
        }
        .logo { font-size:1.5rem; font-weight:600; }
        .logo i { color:#0066FF; margin-right:6px; }
        .logo span { color:#FF6B35; }
        .nav-links { display:flex; gap:2rem; }
        .nav-links a { font-weight:500; padding:0.5rem 0; border-bottom:2px solid transparent; transition:0.2s; }
        .nav-links a:hover, .nav-links a.active { color:#0066FF; border-bottom-color:#0066FF; }
        .user-menu { position:relative; }
        .user-avatar {
            width:40px; height:40px; border-radius:50%; background:#e6f0ff; color:#0066FF;
            display:flex; align-items:center; justify-content:center; font-weight:600; cursor:pointer;
        }
        .user-avatar img { width:100%; height:100%; border-radius:50%; object-fit:cover; }
        .dropdown {
            position:absolute; right:0; top:50px; background:white; border-radius:16px;
            box-shadow:0 10px 30px rgba(0,0,0,0.1); width:180px; display:none; z-index:100;
            border:1px solid #eef2f6;
        }
        .dropdown.show { display:block; }
        .dropdown a { display:flex; align-items:center; gap:10px; padding:0.9rem 1.2rem; transition:background 0.2s; }
        .dropdown a:hover { background:#f1f5f9; }
        .dropdown i { width:20px; color:#0066FF; }
        .main-container {
            max-width:800px; margin:2rem auto; padding:0 2rem;
        }
        .game-card {
            background:white; border-radius:24px; padding:2rem;
            box-shadow:0 4px 12px rgba(0,0,0,0.03); border:1px solid rgba(0,102,255,0.1);
        }
        .difficulty-selector { margin-bottom:1rem; }
        .difficulty-selector button {
            background:#f1f5f9; border:none; padding:0.3rem 1rem; border-radius:40px;
            margin-right:0.5rem; cursor:pointer; transition:0.2s;
        }
        .difficulty-selector button.active { background:#0066FF; color:white; }
        .quiz-question { font-weight:600; margin:1rem 0; font-size:1.2rem; }
        .quiz-options { display:flex; flex-direction:column; gap:0.5rem; }
        .quiz-option {
            background:#f1f5f9; padding:0.8rem 1rem; border-radius:40px; cursor:pointer;
            transition:0.2s; border:2px solid transparent;
        }
        .quiz-option:hover { background:#e2e8f0; }
        .quiz-option.selected { border-color:#0066FF; background:#e6f0ff; }
        .quiz-option.correct { background:#c8e6c9; border-color:#2e7d32; }
        .quiz-option.wrong { background:#ffcdd2; border-color:#d32f2f; }
        .quiz-feedback { margin-top:1rem; font-weight:500; }
        .quiz-score { margin-top:1rem; color:#0066FF; font-weight:600; font-size:1.2rem; }
        .next-btn {
            background:#FF6B35; color:white; border:none; padding:0.8rem 2rem; border-radius:40px;
            margin-top:1rem; cursor:pointer; font-weight:600; width:100%;
        }
        .next-btn:disabled { background:#ccc; cursor:not-allowed; }
        .back-link { display:inline-block; margin-top:1rem; color:#0066FF; }
        .blog-footer {
            background:#000; color:#ccc; padding:3rem 2rem 1.5rem; margin-top:3rem;
        }
        .footer-container {
            max-width:1300px; margin:0 auto; display:grid; grid-template-columns:repeat(3,1fr);
            gap:2rem; text-align:left;
        }
        .footer-col h4 { color:white; margin-bottom:1.2rem; font-size:1.1rem; }
        .footer-col ul { list-style:none; }
        .footer-col li { margin-bottom:0.6rem; }
        .footer-col a { color:#ccc; transition:color 0.2s; }
        .footer-col a:hover { color:#FF6B35; }
        .social-icons { display:flex; gap:1rem; font-size:1.3rem; }
        .social-icons a { color:#ccc; }
        .social-icons a:hover { color:#FF6B35; }
        .copyright {
            text-align:center; margin-top:2rem; padding-top:1.5rem; border-top:1px solid #333;
            color:#777; font-size:0.9rem;
        }
        @media (max-width:700px) { .footer-container { grid-template-columns:1fr; } }
    </style>
</head>
<body>
    <header class="blog-header">
        <div class="header-container">
            <a href="blog-feed.html" class="logo"><i class="fas fa-code"></i> SAMZY<span>blog</span></a>
            <nav class="nav-links">
                <a href="blog-feed.html">Home</a>
                <a href="blog-profile.html">Profile</a>
                <a href="blog-leaderboard.html">Leaderboard</a>
                <a href="blog-games.html">Games</a>
            </nav>
            <div class="user-menu">
                <div class="user-avatar" id="userAvatar"><span id="avatarText"></span></div>
                <div class="dropdown" id="dropdown">
                    <a href="blog-profile.html"><i class="fas fa-user"></i> Profile</a>
                    <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
        </div>
    </header>

    <div class="main-container">
        <div class="game-card">
            <h2><i class="fas fa-code" style="color:#FF6B35;"></i> Coding Quiz</h2>
            <div class="difficulty-selector" id="difficultySelector">
                <button data-diff="all" class="active">All</button>
                <button data-diff="junior">Junior</button>
                <button data-diff="mid">Mid</button>
                <button data-diff="senior">Senior</button>
            </div>
            <div id="quizArea">
                <div class="quiz-question" id="quizQuestion">Loading questions...</div>
                <div class="quiz-options" id="quizOptions"></div>
                <div class="quiz-feedback" id="quizFeedback"></div>
                <div class="quiz-score" id="quizScore">Score: 0</div>
                <button class="next-btn" id="nextQuestion">Next Question</button>
            </div>
            <a href="blog-games.html" class="back-link"><i class="fas fa-arrow-left"></i> Back to Games</a>
        </div>
    </div>

    <footer class="blog-footer">
        <div class="footer-container">
            <div class="footer-col"><h4>Navigation</h4><ul><li><a href="blog-feed.html">Home</a></li><li><a href="blog-profile.html">Profile</a></li><li><a href="blog-leaderboard.html">Leaderboard</a></li><li><a href="blog-games.html">Games</a></li></ul></div>
            <div class="footer-col"><h4>Legal</h4><ul><li><a href="terms.html">Terms of Service</a></li><li><a href="privacy.html">Privacy Policy</a></li><li><a href="cookies.html">Cookie Policy</a></li></ul></div>
            <div class="footer-col"><h4>Connect</h4><div class="social-icons"><a href="#"><i class="fab fa-twitter"></i></a><a href="#"><i class="fab fa-linkedin"></i></a><a href="#"><i class="fab fa-github"></i></a></div></div>
        </div>
        <div class="copyright">© 2026 Samzy Digital Community. All rights reserved.</div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBkgwVFe1PMYMvmZxoFVFErZ27Q3XYQ-_g",
            authDomain: "samzy-community-blog.firebaseapp.com",
            projectId: "samzy-community-blog",
            storageBucket: "samzy-community-blog.firebasestorage.app",
            messagingSenderId: "573240466296",
            appId: "1:573240466296:web:5faa312a1136162961468d"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        let currentUser = null;
        auth.onAuthStateChanged(user => {
            if (!user) { window.location.href = 'login.html'; return; }
            currentUser = user;
            loadUserAvatar(user);
            initQuiz();
        });

        function stringToColor(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) hash = str.charCodeAt(i) + ((hash << 5) - hash);
            return `hsl(${hash % 360}, 70%, 80%)`;
        }
        function loadUserAvatar(user) {
            const avatarDiv = document.querySelector('.user-avatar');
            db.collection('users').doc(user.uid).get().then(doc => {
                const displayName = doc.exists && doc.data().displayName ? doc.data().displayName : user.email;
                const initials = displayName.charAt(0).toUpperCase();
                avatarDiv.style.background = stringToColor(displayName);
                avatarDiv.innerHTML = `<span>${initials}</span>`;
            }).catch(() => {
                avatarDiv.style.background = stringToColor(user.email);
                avatarDiv.innerHTML = `<span>${user.email.charAt(0).toUpperCase()}</span>`;
            });
        }
        document.getElementById('userAvatar').addEventListener('click', e => {
            e.stopPropagation();
            document.getElementById('dropdown').classList.toggle('show');
        });
        document.addEventListener('click', () => document.getElementById('dropdown').classList.remove('show'));
        document.getElementById('logoutBtn').addEventListener('click', e => {
            e.preventDefault();
            auth.signOut().then(() => window.location.href = 'community.html');
        });

        // ---------- 50 SAMPLE QUESTIONS (expand to 400 by copying) ----------
        const quizQuestions = [
            // ===== JUNIOR (HTML, CSS, JS basics) =====
            { question: "What does HTML stand for?", options: ["Hyper Text Markup Language", "High Tech Modern Language", "Hyperlink and Text Markup Language", "Home Tool Markup Language"], correct: 0, difficulty: "junior" },
            { question: "Which tag is used for the largest heading?", options: ["<h1>", "<heading>", "<h6>", "<head>"], correct: 0, difficulty: "junior" },
            { question: "What is the correct HTML element for inserting a line break?", options: ["<br>", "<lb>", "<break>", "<hr>"], correct: 0, difficulty: "junior" },
            { question: "Which property is used to change the background color?", options: ["background-color", "color", "bgcolor", "background"], correct: 0, difficulty: "junior" },
            { question: "How do you select an element with id 'demo'?", options: ["#demo", ".demo", "demo", "*demo"], correct: 0, difficulty: "junior" },
            { question: "Which CSS property controls the text size?", options: ["font-size", "text-size", "font-style", "size"], correct: 0, difficulty: "junior" },
            { question: "How do you write 'Hello World' in an alert box?", options: ["alert('Hello World')", "msgBox('Hello World')", "alertBox('Hello World')", "console.log('Hello World')"], correct: 0, difficulty: "junior" },
            { question: "Which operator is used for strict equality?", options: ["===", "==", "=", "!="], correct: 0, difficulty: "junior" },
            { question: "How do you create a function in JavaScript?", options: ["function myFunction()", "def myFunction()", "func myFunction()", "create myFunction()"], correct: 0, difficulty: "junior" },
            { question: "Which HTML tag is used to define an internal style sheet?", options: ["<style>", "<css>", "<script>", "<link>"], correct: 0, difficulty: "junior" },
            { question: "Which property is used to change the font of an element?", options: ["font-family", "font-style", "font-weight", "font"], correct: 0, difficulty: "junior" },
            { question: "How do you declare a JavaScript variable?", options: ["let x", "var x", "const x", "All of the above"], correct: 3, difficulty: "junior" },
            { question: "What is the correct way to write a JavaScript array?", options: ["var colors = ['red','green','blue']", "var colors = 'red','green','blue'", "var colors = (red,green,blue)", "var colors = {red,green,blue}"], correct: 0, difficulty: "junior" },
            { question: "Which event occurs when the user clicks on an HTML element?", options: ["onclick", "onchange", "onmouseclick", "onhover"], correct: 0, difficulty: "junior" },
            { question: "What does CSS stand for?", options: ["Cascading Style Sheets", "Creative Style Sheets", "Computer Style Sheets", "Colorful Style Sheets"], correct: 0, difficulty: "junior" },

            // ===== MID (CSS layouts, JavaScript fundamentals, basic React/PHP) =====
            { question: "In CSS, what does 'box-sizing: border-box' do?", options: ["Includes padding and border in the element's total width/height", "Excludes padding and border", "Only includes border", "Only includes padding"], correct: 0, difficulty: "mid" },
            { question: "What is the correct way to create a React component?", options: ["function MyComponent() { return <div>Hi</div>; }", "class MyComponent extends React.Component { render() { return <div>Hi</div>; } }", "Both are valid", "Neither"], correct: 2, difficulty: "mid" },
            { question: "Which hook is used for side effects in React?", options: ["useEffect", "useState", "useContext", "useReducer"], correct: 0, difficulty: "mid" },
            { question: "In PHP, how do you start a session?", options: ["session_start()", "start_session()", "Session::start()", "session_begin()"], correct: 0, difficulty: "mid" },
            { question: "What is the output of '3' + 2 in JavaScript?", options: ["'32'", "5", "32", "Error"], correct: 0, difficulty: "mid" },
            { question: "Which CSS property makes an element disappear but still occupy space?", options: ["visibility: hidden", "display: none", "opacity: 0", "hidden: true"], correct: 0, difficulty: "mid" },
            { question: "What is the purpose of the 'key' prop in React lists?", options: ["Help React identify which items changed", "Add a CSS key", "Bind events", "None"], correct: 0, difficulty: "mid" },
            { question: "In JavaScript, what is a closure?", options: ["A function with access to its outer scope", "A closed block of code", "A loop", "A data type"], correct: 0, difficulty: "mid" },
            { question: "What does the 'map' method return in JavaScript?", options: ["A new array", "The original array", "A boolean", "An object"], correct: 0, difficulty: "mid" },
            { question: "Which PHP function is used to connect to a MySQL database?", options: ["mysqli_connect()", "mysql_connect()", "db_connect()", "connect_db()"], correct: 0, difficulty: "mid" },
            { question: "What does the 'this' keyword refer to in JavaScript?", options: ["The current object", "The global object", "It depends on the context", "The function itself"], correct: 2, difficulty: "mid" },
            { question: "In React, what is useState used for?", options: ["Adding state to functional components", "Making API calls", "Styling components", "Handling events"], correct: 0, difficulty: "mid" },
            { question: "What is the difference between '==' and '===' in JavaScript?", options: ["'===' checks value and type", "'==' checks value only", "No difference", "One is for numbers only"], correct: 0, difficulty: "mid" },
            { question: "Which CSS property creates a flex container?", options: ["display: flex", "flex-container: true", "position: flex", "flexbox: inline"], correct: 0, difficulty: "mid" },

            // ===== SENIOR (Advanced JS, React hooks, performance, security) =====
            { question: "What is the output of: console.log(0.1 + 0.2 === 0.3)?", options: ["false", "true", "undefined", "Error"], correct: 0, difficulty: "senior" },
            { question: "Which of the following is NOT a JavaScript data type?", options: ["float", "number", "string", "boolean"], correct: 0, difficulty: "senior" },
            { question: "What is the purpose of the 'useMemo' hook in React?", options: ["Memoize expensive calculations", "Memoize components", "Handle side effects", "Create refs"], correct: 0, difficulty: "senior" },
            { question: "In PHP, what does the '...' operator do?", options: ["Spread operator (unpack arrays)", "Concatenation", "Exponentiation", "Comments"], correct: 0, difficulty: "senior" },
            { question: "What is a promise in JavaScript?", options: ["An object representing eventual completion", "A callback function", "A synchronous operation", "A loop"], correct: 0, difficulty: "senior" },
            { question: "Which method is used to prevent a form from submitting?", options: ["preventDefault()", "stopPropagation()", "return false", "Both A and C"], correct: 3, difficulty: "senior" },
            { question: "What does the 'static' keyword mean in PHP?", options: ["The property/method belongs to the class, not instances", "It cannot be changed", "It is hidden", "It is final"], correct: 0, difficulty: "senior" },
            { question: "What is the virtual DOM in React?", options: ["A lightweight copy of the real DOM", "A separate browser feature", "A database", "A styling tool"], correct: 0, difficulty: "senior" },
            { question: "How do you handle errors in async/await?", options: ["try/catch", ".catch()", "error()", "Both A and B"], correct: 3, difficulty: "senior" },
            { question: "What is the output of: [1,2,3] + [4,5,6] in JavaScript?", options: ["1,2,34,5,6", "1,2,3,4,5,6", "[1,2,3,4,5,6]", "Error"], correct: 0, difficulty: "senior" },
            { question: "What is the purpose of React StrictMode?", options: ["Highlight potential problems", "Make code run faster", "Add extra features", "None"], correct: 0, difficulty: "senior" },
            { question: "Which HTTP method is idempotent?", options: ["GET", "POST", "PUT", "Both A and C"], correct: 3, difficulty: "senior" },
            { question: "What is the difference between 'let' and 'const'?", options: ["const cannot be reassigned", "let is block-scoped", "const must be initialized", "All of the above"], correct: 3, difficulty: "senior" },
            { question: "In React, what is a higher-order component?", options: ["A function that takes a component and returns a new component", "A component that wraps others", "A component with state", "A component that uses hooks"], correct: 0, difficulty: "senior" },

            // ===== ADD MORE HERE – just copy the pattern above =====
            // To reach 400, duplicate and modify the question, options, correct index, and difficulty.
        ];

        // Shuffle utility
        function shuffleArray(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedOption = null;
        let answerSubmitted = false;
        let currentDifficulty = 'all';

        function initQuiz() {
            filterQuestions('all');
            setupDifficultyButtons();
            loadQuestion();
            document.getElementById('nextQuestion').addEventListener('click', nextQuestionHandler);
        }

        function filterQuestions(difficulty) {
            if (difficulty === 'all') {
                currentQuestions = shuffleArray([...quizQuestions]);
            } else {
                currentQuestions = shuffleArray(quizQuestions.filter(q => q.difficulty === difficulty));
            }
            currentQuestionIndex = 0;
            score = 0;
            updateScore();
        }

        function setupDifficultyButtons() {
            const buttons = document.querySelectorAll('#difficultySelector button');
            buttons.forEach(btn => {
                btn.addEventListener('click', () => {
                    buttons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentDifficulty = btn.dataset.diff;
                    filterQuestions(currentDifficulty);
                    loadQuestion();
                });
            });
        }

        function loadQuestion() {
            if (currentQuestions.length === 0) {
                document.getElementById('quizQuestion').textContent = 'No questions for this level.';
                document.getElementById('quizOptions').innerHTML = '';
                document.getElementById('nextQuestion').disabled = true;
                return;
            }
            const q = currentQuestions[currentQuestionIndex];
            document.getElementById('quizQuestion').textContent = q.question;
            const optionsDiv = document.getElementById('quizOptions');
            optionsDiv.innerHTML = '';
            q.options.forEach((opt, idx) => {
                const optDiv = document.createElement('div');
                optDiv.className = 'quiz-option';
                optDiv.textContent = opt;
                optDiv.dataset.index = idx;
                optDiv.addEventListener('click', () => selectOption(idx));
                optionsDiv.appendChild(optDiv);
            });
            document.getElementById('quizFeedback').textContent = '';
            selectedOption = null;
            answerSubmitted = false;
            document.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected', 'correct', 'wrong'));
            document.getElementById('nextQuestion').disabled = false;
        }

        function selectOption(idx) {
            if (answerSubmitted) return;
            selectedOption = idx;
            document.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('.quiz-option')[idx].classList.add('selected');
        }

        function submitAnswer() {
            if (selectedOption === null) {
                alert('Please select an answer.');
                return false;
            }
            const q = currentQuestions[currentQuestionIndex];
            const isCorrect = (selectedOption === q.correct);
            const options = document.querySelectorAll('.quiz-option');
            options.forEach((opt, idx) => {
                if (idx === q.correct) opt.classList.add('correct');
                else if (idx === selectedOption && !isCorrect) opt.classList.add('wrong');
            });
            if (isCorrect) {
                score += 10; // 10 points per correct answer
                document.getElementById('quizFeedback').textContent = '✅ Correct! +10 points.';
                updateUserPoints(10);
            } else {
                document.getElementById('quizFeedback').textContent = `❌ Wrong. The correct answer is: ${q.options[q.correct]}`;
            }
            updateScore();
            answerSubmitted = true;
            return true;
        }

        async function updateUserPoints(amount) {
            if (!currentUser) return;
            try {
                await db.collection('users').doc(currentUser.uid).update({
                    quizPoints: firebase.firestore.FieldValue.increment(amount),
                    points: firebase.firestore.FieldValue.increment(amount)
                });
            } catch (e) {
                console.error('Points update error:', e);
            }
        }

        function nextQuestionHandler() {
            if (!answerSubmitted) {
                if (!submitAnswer()) return;
            }
            currentQuestionIndex++;
            if (currentQuestionIndex < currentQuestions.length) {
                loadQuestion();
            } else {
                document.getElementById('quizQuestion').textContent = 'Quiz completed! Well done.';
                document.getElementById('quizOptions').innerHTML = '';
                document.getElementById('nextQuestion').disabled = true;
                document.getElementById('quizFeedback').textContent = `Final score: ${score}`;
                // Optionally award bonus points for completion
                // updateUserPoints(50);
            }
        }

        function updateScore() {
            document.getElementById('quizScore').textContent = `Score: ${score}`;
        }
    </script>
</body>
</html>